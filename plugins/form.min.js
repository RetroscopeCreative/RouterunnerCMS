routerunner_input=function(e,g,h,c){var f=new routerunner_base;$.extend(this,f);this.form=h;this.input=e;this.input_name=c;this.errors=this.error_wrapper=this.input_wrapper=!1;this.params=$.extend({type:"input",field:!1,mandatory:{value:!1,msg:""},regexp:{value:!1,options:"im",msg:""},error:{selector:":input",template:"<i class='fa fa-warning tooltips' data-container='body' data-placement='bottom' data-html='true' data-original-title='{text}'></i>",method:"before"},help:"",change:{event:"change",
    value:"val",call:!1},"default":null},g);this.init=function(){this.input_wrapper=this.input;!$(this.input).data("routerunner-input")&&(input_wrapper=$(this.input).closest("[data-routerunner-input]").get(0))&&(this.input_wrapper=input_wrapper);this.params.error.selector&&(error_wrapper=$(this.input_wrapper).find(this.params.error.selector).get(0))&&(this.error_wrapper=error_wrapper);!this.error_wrapper&&this.params.error.selector&&(this.error_wrapper=$(this.input).closest("form").find(this.params.error.selector).get(0));
    this.error_wrapper||(this.error_wrapper=this.input_wrapper);this.bind_event()};this.check=function(){var a=this.params.change.event?this.params.change.event:"change";$(this.input).trigger(a);return this.errors};this.bind_event=function(){var a=this,b=this.params.change.event?this.params.change.event:"change";$(this.input).bind(b,function(b){b=a.params.error.method;a.errors=a.has_error();var d=!0;if(a.params.change.call){var c=a.parseFn(a.params.change.call.object),e=a.params.change.call["function"];
    "object"==typeof c&&"function"==typeof c[e]&&(d=!1===c[e](a)?!1:!0)}if(d){d=!1;if(a.errors){var f="";$.each(a.errors,function(b,c){var d=a.params.error.template;c&&"string"==typeof c&&(d=d.replace("{text}",c));d=d.replace("{key}",b);f+=d});c=$(f);"replaceWith"==b&&$(a.input_wrapper).data("error-wrapper-original",a.error_wrapper);$(a.error_wrapper).data("error-object")&&$(a.error_wrapper).data("error-object")[a.input_name]&&$(a.error_wrapper).data("error-object")[a.input_name].remove();$(a.error_wrapper)[b](c);
    "replaceWith"==b&&(a.error_wrapper=c.get(0));a.params.error.addClass&&$.each(a.params.error.addClass,function(b,d){var c=$(a.input_wrapper);b&&(c=c.find(b));c.addClass(d)});a.error_wrapper==a.input&&"before"==b&&($(a.error_wrapper).closest("div").addClass("input-icon").addClass("right"),$(".tooltips").tooltip());b=$(a.error_wrapper).data("error-object")?$(a.error_wrapper).data("error-object"):{};b[a.input_name]=c;$(a.error_wrapper).data("error-object",b)}else $(a.input_wrapper).data("error-wrapper-original")?
    ($(a.error_wrapper).replaceWith($(a.input_wrapper).data("error-wrapper-original")),a.error_wrapper=$(a.input_wrapper).data("error-wrapper-original"),d=!0):a.error_wrapper==a.input&&"before"==b?($(a.error_wrapper).closest("div").removeClass("input-icon").removeClass("right"),$(a.error_wrapper).data("error-object")&&$(a.error_wrapper).data("error-object")[a.input_name]&&$(a.error_wrapper).data("error-object")[a.input_name].remove(),d=!0):a.error_wrapper==a.input&&"after"==b?($(a.error_wrapper).closest("div").removeClass("input-icon").removeClass("right"),
$(a.error_wrapper).data("error-object")&&$(a.error_wrapper).data("error-object")[a.input_name]&&$(a.error_wrapper).data("error-object")[a.input_name].remove(),d=!0):a.error_wrapper&&"append"==b&&($(a.error_wrapper).data("error-object")&&$(a.error_wrapper).data("error-object")[a.input_name]&&$(a.error_wrapper).data("error-object")[a.input_name].remove(),d=!0);d&&a.params.error.addClass&&$.each(a.params.error.addClass,function(b,c){var d=$(a.input_wrapper);b&&(d=d.find(b));d.removeClass(c)})}})};this.getter=
    function(){var a=!1,b=this.params.change.value?this.params.change.value:"val";"function"==typeof this.input[b]?a=this.input[b]():"function"==typeof $(this.input)[b]&&(a=$(this.input)[b]());return a};this.set=function(a){var b=this.params.change.value?this.params.change.value:"val";if("function"==typeof this.input[b])this.input[b](a);else if("function"==typeof $(this.input)[b])$(this.input)[b](a)};this.has_error=function(){var a={},b=this.getter();!this.params.mandatory||!this.params.mandatory.value||
!0!==this.params.mandatory.value||b&&"0"!=b||(a.mandatory=this.params.mandatory.msg?this.params.mandatory.msg:!0);this.params.regexp&&this.params.regexp.value&&((new RegExp(this.params.regexp.value,this.params.regexp.options)).test(b)||(a.regexp=this.params.regexp.msg?this.params.regexp.msg:!0));this.params.regexp&&$.isArray(this.params.regexp)&&($.each(this.params.regexp,function(c,d){var f,e=!1;$.isArray(d.value)?$.each(d.value,function(a,c){var g=$.isArray(d.options)&&"undefined"!=typeof d.options[a]?
    d.options[a]:d.options;f=new RegExp(c,g);f.test(b)&&(e=!0)}):(f=new RegExp(d.value,d.options),e=f.test(b));e||(a.regexp?($.isArray(a.regexp)||(a.regexp=Array(a.regexp)),a.regexp.push(d.msg?d.msg:!0)):a.regexp=d.msg?d.msg:!0)}),$.isArray(a.regexp)&&(a.regexp=a.regexp.join("\n")));Object.keys(a).length||(a=!1);return a};this.init()};
routerunner_form=function(e,g){var h=new routerunner_base;$.extend(this,h);this.id=$(e).attr("name")?$(e).attr("name"):$(e).attr("id");this.form=e;this.params=$.extend({method:$(this.form).attr("method")?$(this.form).attr("method"):"post",action:$(this.form).attr("action")?$(this.form).attr("action"):window.location.href,target:$(this.form).attr("target")?$(this.form).attr("target"):"_self",selector:":input[name]"},g);this.inputs=this.instance();this.errors={};this.submitted=!1;this.init=function(){var c=
    this;$(this.form).data("routerunner-form")||($(this.form).find(this.params.selector).each(function(){var f=$(this).attr("name"),a={};$(this).data("routerunner-input")?a=$(this).data("routerunner-input"):(params_holder=$(this).closest("[data-routerunner-input]")).length&&(a=params_holder.data("routerunner-input"));var a=new routerunner_input(this,a,c,f),b;if(b=c.instance(f))$.isArray(b)||(b=[b]),b.push(a),a=b;c.instance(f,a)}),$(this.form).data("routerunner-form",!0),$(this.form).on("submit",function(){if(c.submitted)return!1;
    c.submitted=!0;c.errors={};$.each(c.inputs,function(f,a){$.isArray(a)&&1<a.length?$.each(a,function(a,e){e.check()&&(c.errors[f]=e)}):a&&a.check()&&(c.errors[f]=a)});if(Object.keys(c.errors).length)return c.submitted=!1}))};this.init()};var routerunner_forms=function(){this.forms={}},routerunner_forms=new routerunner_forms;
$(document).ready(function(){$(".routerunner-form").each(function(){var e=$(this).data("routerunner-form")?$(this).data("routerunner-form"):{},g=$(this).attr("name")?$(this).attr("name"):$(this).attr("id");routerunner_forms.forms[g]=new routerunner_form(this,e)})});