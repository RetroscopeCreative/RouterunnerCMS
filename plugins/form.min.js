routerunner_input=function(r,e,t,a){var i=new routerunner_base;$.extend(this,i),this.form=t,this.input=r,this.input_name=a,this.input_wrapper=!1,this.error_wrapper=!1,this.errors=!1,this.params=$.extend({type:"input",field:!1,mandatory:{value:!1,msg:""},regexp:{value:!1,options:"im",msg:""},error:{selector:":input",template:"<i class='fa fa-warning tooltips' data-container='body' data-placement='bottom' data-html='true' data-original-title='{text}'></i>",method:"before"},help:"",change:{event:"change",value:"val",call:!1},default:null},e),this.init=function(){this.input_wrapper=this.input,!$(this.input).data("routerunner-input")&&(input_wrapper=$(this.input).closest("[data-routerunner-input]").get(0))&&(this.input_wrapper=input_wrapper),this.params.error.selector&&(error_wrapper=$(this.input_wrapper).find(this.params.error.selector).get(0))&&(this.error_wrapper=error_wrapper),!this.error_wrapper&&this.params.error.selector&&(this.error_wrapper=$(this.input).closest("form").find(this.params.error.selector).get(0)),this.error_wrapper||(this.error_wrapper=this.input_wrapper),this.bind_event()},this.check=function(){var r=this.params.change.event?this.params.change.event:"change";return $(this.input).trigger(r),this.errors},this.bind_event=function(){var r=this,e=this.params.change.event?this.params.change.event:"change";$(this.input).bind(e,function(e){var t=r.params.error.method;r.errors=r.has_error();var a=!0;if(r.params.change.call){var i=r.parseFn(r.params.change.call.object),n=r.params.change.call.function;"object"==typeof i&&"function"==typeof i[n]&&(a=!1!==i[n](r))}if(a){var o=!1;if(r.errors){var p="";$.each(r.errors,function(e,t){var a=r.params.error.template;t&&"string"==typeof t&&(a=a.replace("{text}",t)),a=a.replace("{key}",e),p+=a});var s=$(p);"replaceWith"==t&&$(r.input_wrapper).data("error-wrapper-original",r.error_wrapper),$(r.error_wrapper).data("error-object")&&$(r.error_wrapper).data("error-object")[r.input_name]&&$(r.error_wrapper).data("error-object")[r.input_name].remove(),$(r.error_wrapper)[t](s),"replaceWith"==t&&(r.error_wrapper=s.get(0)),r.params.error.addClass&&$.each(r.params.error.addClass,function(e,t){var a=$(r.input_wrapper);e&&(a=a.find(e)),a.addClass(t)}),r.error_wrapper==r.input&&"before"==t&&($(r.error_wrapper).closest("div").addClass("input-icon").addClass("right"),$(".tooltips").tooltip());var u=$(r.error_wrapper).data("error-object")?$(r.error_wrapper).data("error-object"):{};u[r.input_name]=s,$(r.error_wrapper).data("error-object",u)}else $(r.input_wrapper).data("error-wrapper-original")?($(r.error_wrapper).replaceWith($(r.input_wrapper).data("error-wrapper-original")),r.error_wrapper=$(r.input_wrapper).data("error-wrapper-original"),o=!0):r.error_wrapper==r.input&&"before"==t?($(r.error_wrapper).closest("div").removeClass("input-icon").removeClass("right"),$(r.error_wrapper).data("error-object")&&$(r.error_wrapper).data("error-object")[r.input_name]&&$(r.error_wrapper).data("error-object")[r.input_name].remove(),o=!0):r.error_wrapper==r.input&&"after"==t?($(r.error_wrapper).closest("div").removeClass("input-icon").removeClass("right"),$(r.error_wrapper).data("error-object")&&$(r.error_wrapper).data("error-object")[r.input_name]&&$(r.error_wrapper).data("error-object")[r.input_name].remove(),o=!0):r.error_wrapper&&"append"==t?($(r.error_wrapper).data("error-object")&&$(r.error_wrapper).data("error-object")[r.input_name]&&$(r.error_wrapper).data("error-object")[r.input_name].remove(),o=!0):r.error_wrapper&&($(r.error_wrapper).data("error-object")&&$(r.error_wrapper).data("error-object")[r.input_name]&&$(r.error_wrapper).data("error-object")[r.input_name].remove(),o=!0);o&&r.params.error.addClass&&$.each(r.params.error.addClass,function(e,t){var a=$(r.input_wrapper);e&&(a=a.find(e)),a.removeClass(t)})}})},this.getter=function(){var r=!1,e=this.params.change.value?this.params.change.value:"val";return"function"==typeof this.input[e]?r=this.input[e]():"function"==typeof $(this.input)[e]&&(r=$(this.input)[e]()),r},this.set=function(r){var e=this.params.change.value?this.params.change.value:"val";"function"==typeof this.input[e]?this.input[e](r):"function"==typeof $(this.input)[e]&&$(this.input)[e](r)},this.has_error=function(){var r={},e=this.getter();return!this.params.mandatory||!this.params.mandatory.value||!0!==this.params.mandatory.value||e&&"0"!=e||(r.mandatory=!this.params.mandatory.msg||this.params.mandatory.msg),this.params.regexp&&this.params.regexp.value&&(new RegExp(this.params.regexp.value,this.params.regexp.options).test(e)||(r.regexp=!this.params.regexp.msg||this.params.regexp.msg)),this.params.regexp&&$.isArray(this.params.regexp)&&($.each(this.params.regexp,function(t,a){var i,n=!1;$.isArray(a.value)?$.each(a.value,function(r,t){var o=$.isArray(a.options)&&void 0!==a.options[r]?a.options[r]:a.options;(i=new RegExp(t,o)).test(e)&&(n=!0)}):(i=new RegExp(a.value,a.options),n=i.test(e)),n||(r.regexp?($.isArray(r.regexp)||(r.regexp=new Array(r.regexp)),r.regexp.push(!a.msg||a.msg)):r.regexp=!a.msg||a.msg)}),$.isArray(r.regexp)&&(r.regexp=r.regexp.join("\n"))),Object.keys(r).length||(r=!1),r},this.init()},routerunner_form=function(r,e){var t=new routerunner_base;$.extend(this,t),this.id=$(r).attr("name")?$(r).attr("name"):$(r).attr("id"),this.form=r,this.params=$.extend({method:$(this.form).attr("method")?$(this.form).attr("method"):"post",action:$(this.form).attr("action")?$(this.form).attr("action"):window.location.href,target:$(this.form).attr("target")?$(this.form).attr("target"):"_self",selector:":input[name]"},e),this.inputs=this.instance(),this.errors={},this.submitted=!1,this.init=function(){var r=this;$(this.form).data("routerunner-form")||($(this.form).find(this.params.selector).each(function(){var e=$(this).attr("name"),t={};$(this).data("routerunner-input")?t=$(this).data("routerunner-input"):(params_holder=$(this).closest("[data-routerunner-input]")).length&&(t=params_holder.data("routerunner-input"));var a,i=new routerunner_input(this,t,r,e);(a=r.instance(e))&&($.isArray(a)||(a=[a]),a.push(i),i=a),r.instance(e,i)}),$(this.form).data("routerunner-form",!0),$(this.form).on("submit",function(){return!r.submitted&&(r.submitted=!0,r.errors={},$.each(r.inputs,function(e,t){$.isArray(t)&&t.length>1?$.each(t,function(t,a){a.check()&&(r.errors[e]=a)}):t&&t.check()&&(r.errors[e]=t)}),Object.keys(r.errors).length?(r.submitted=!1,!1):void($(r.form).find(".error.forced-error").length&&(r.submitted=!1)))}))},this.init()};var routerunner_forms=new(routerunner_forms=function(){this.forms={}});$(document).ready(function(){$(".routerunner-form").each(function(){var r=$(this).data("routerunner-form")?$(this).data("routerunner-form"):{},e=$(this).attr("name")?$(this).attr("name"):$(this).attr("id");routerunner_forms.forms[e]=new routerunner_form(this,r)})});